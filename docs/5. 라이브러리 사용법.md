
# 5. 라이브러리 사용법

---

## 5.1 라이브러리와 모듈

지금까지 Python의 기본 기능만으로도 많은 것을 할 수 있었습니다. 하지만 복잡한 작업, 특히 데이터 분석이나 과학 계산을 할 때는 처음부터 모든 것을 직접 만들기보다 이미 만들어진 도구를 사용하는 것이 훨씬 효율적입니다.

**라이브러리(library)**는 재사용 가능한 코드의 모음입니다. 다른 프로그래머들이 특정 작업을 위해 만든 함수, 클래스, 변수들을 패키지 형태로 묶어놓은 것입니다.

**용어 정리:**

- **모듈(module):** 하나의 `.py` 파일. 함수와 변수를 담고 있음
- **패키지(package):** 여러 모듈을 디렉터리로 묶은 것
- **라이브러리(library):** 패키지와 모듈의 집합. 특정 목적을 위한 도구 모음

일상적으로는 이 용어들을 혼용하지만, 기술적으로는 약간씩 다릅니다.

**왜 라이브러리를 사용하는가:**

1. **바퀴를 재발명하지 않기:** 평균 계산, 파일 읽기 같은 흔한 작업은 이미 최적화된 코드가 있습니다
2. **검증된 코드:** 수백만 명이 사용하며 버그를 찾아낸 코드
3. **성능:** C, Fortran 같은 언어로 작성된 고속 연산
4. **표준화:** 같은 방식으로 작업하면 협업이 쉬움

**Python 라이브러리 종류:**

- **표준 라이브러리:** Python 설치 시 기본 포함 (`math`, `random`, `datetime` 등)
- **외부 라이브러리:** 별도 설치 필요 (NumPy, Pandas, Matplotlib 등)

**데이터 분석 생태계:**

- **NumPy:** 수치 계산, 배열 연산
- **Pandas:** 테이블 형태 데이터 처리
- **Matplotlib/Seaborn:** 시각화
- **scikit-learn:** 머신러닝
- **TensorFlow/PyTorch:** 딥러닝

이 장에서는 NumPy와 Pandas의 기초를 다룹니다. 이 두 라이브러리는 모든 데이터 분석의 토대입니다.

---

## 5.2 import 문의 기초

### 5.2.1 기본 import

라이브러리를 사용하려면 먼저 **import**해야 합니다.

```python
import math

result = math.sqrt(16)
print(result)   # 4.0
```

**문법:**

```python
import 모듈명

모듈명.함수명()
```

점(`.`) 표기법으로 모듈 내의 함수나 변수에 접근합니다.

```python
import math

print(math.pi)        # 3.141592653589793
print(math.sqrt(25))  # 5.0
print(math.ceil(3.2)) # 4 (올림)
print(math.floor(3.8))# 3 (내림)
```

### 5.2.2 별칭 사용

모듈 이름이 길거나 자주 사용할 때는 짧은 별칭을 붙입니다.

```python
import numpy as np

array = np.array([1, 2, 3, 4, 5])
print(array)
```

**관례적 별칭:**

데이터 분석 커뮤니티에서 널리 쓰이는 관례가 있습니다. 이를 따르면 다른 사람의 코드를 이해하기 쉽습니다.

```python
import numpy as np          # NumPy
import pandas as pd         # Pandas
import matplotlib.pyplot as plt  # Matplotlib
```

### 5.2.3 선택적 import

모듈 전체가 아니라 특정 함수만 가져올 수 있습니다.

```python
from math import sqrt, pi

print(sqrt(16))   # 4.0 (math. 없이 바로 사용)
print(pi)         # 3.141592653589793
```

**여러 개:**

```python
from random import randint, choice, shuffle
```

**와일드카드 import (권장하지 않음):**

```python
from math import *

print(sqrt(25))   # 5.0
```

모든 것을 가져오지만, 어디서 온 함수인지 불명확해서 **사용하지 않는 것이 좋습니다**. 이름 충돌도 발생할 수 있습니다.

```python
from math import *
from numpy import *

# sqrt는 math 것? numpy 것?
```

### 5.2.4 import 오류 해결

**ModuleNotFoundError:**

가장 흔한 에러입니다.

```python
import pandas

# ModuleNotFoundError: No module named 'pandas'
```

**해결 방법:**

1. 가상환경이 활성화되어 있는지 확인
    
    - 터미널에 `(venv)` 표시 있는지
2. 라이브러리 설치
    
    ```bash
    pip install pandas
    ```
    
3. VS Code에서 올바른 인터프리터 선택
    
    - `Ctrl+Shift+P` → "Python: Select Interpreter"
    - 가상환경의 Python 선택
4. 설치 확인
    
    ```bash
    pip list
    ```
    

**AI 활용 팁:**

import 오류가 해결되지 않으면 AI에게 물어보세요.

"ModuleNotFoundError가 계속 발생합니다. 가상환경도 활성화했고 pip install도 했는데 안 됩니다. 어떻게 해야 하나요?"

에러 메시지 전체를 복사해서 보여주면 더 정확한 답을 얻을 수 있습니다.

---

## 5.3 NumPy 기초

### 5.3.1 NumPy란

NumPy(Numerical Python)는 Python에서 수치 계산을 위한 핵심 라이브러리입니다. 특히 **배열(array)** 연산에 최적화되어 있습니다.

**리스트 vs NumPy 배열:**

```python
# 리스트로 계산
numbers = [1, 2, 3, 4, 5]
doubled = []
for num in numbers:
    doubled.append(num * 2)
print(doubled)   # [2, 4, 6, 8, 10]

# NumPy 배열로 계산
import numpy as np

numbers = np.array([1, 2, 3, 4, 5])
doubled = numbers * 2
print(doubled)   # [2 4 6 8 10]
```

NumPy는 더 간결하고 빠릅니다. 특히 데이터가 클수록 차이가 큽니다.

**설치:**

```bash
pip install numpy
```

### 5.3.2 배열 생성

**리스트에서 변환:**

```python
import numpy as np

# 1차원 배열
arr1d = np.array([1, 2, 3, 4, 5])
print(arr1d)   # [1 2 3 4 5]

# 2차원 배열 (행렬)
arr2d = np.array([[1, 2, 3], [4, 5, 6]])
print(arr2d)
# [[1 2 3]
#  [4 5 6]]
```

**특정 값으로 채우기:**

```python
# 0으로 채운 배열
zeros = np.zeros(5)
print(zeros)   # [0. 0. 0. 0. 0.]

# 1로 채운 배열
ones = np.ones((3, 4))  # 3행 4열
print(ones)
# [[1. 1. 1. 1.]
#  [1. 1. 1. 1.]
#  [1. 1. 1. 1.]]

# 특정 값으로 채우기
full = np.full((2, 3), 7)
print(full)
# [[7 7 7]
#  [7 7 7]]
```

**범위 생성:**

```python
# arange: range와 비슷
arr = np.arange(0, 10, 2)  # 0부터 10 미만까지 2씩
print(arr)   # [0 2 4 6 8]

# linspace: 균등 간격으로 n개
arr = np.linspace(0, 1, 5)  # 0부터 1까지 5개
print(arr)   # [0.   0.25 0.5  0.75 1.  ]
```

**랜덤 배열:**

```python
# 0~1 사이 랜덤 실수
random_arr = np.random.random(5)
print(random_arr)   # [0.37454012 0.95071431 0.73199394 0.59865848 0.15601864]

# 정수 랜덤
random_int = np.random.randint(1, 100, size=10)  # 1~99 사이 정수 10개
print(random_int)

# 정규분포 랜덤
normal = np.random.randn(5)  # 평균 0, 표준편차 1
print(normal)
```

### 5.3.3 배열 속성과 연산

**속성:**

```python
arr = np.array([[1, 2, 3], [4, 5, 6]])

print(arr.shape)   # (2, 3) - 2행 3열
print(arr.dtype)   # int64 - 데이터 타입
print(arr.size)    # 6 - 총 요소 개수
print(arr.ndim)    # 2 - 차원 수
```

**요소별 연산 (벡터화):**

NumPy의 강력한 기능입니다. 반복문 없이 모든 요소에 연산을 적용합니다.

```python
arr = np.array([1, 2, 3, 4, 5])

print(arr + 10)    # [11 12 13 14 15]
print(arr * 2)     # [ 2  4  6  8 10]
print(arr ** 2)    # [ 1  4  9 16 25]
print(arr / 2)     # [0.5 1.  1.5 2.  2.5]
```

**배열 간 연산:**

```python
arr1 = np.array([1, 2, 3])
arr2 = np.array([10, 20, 30])

print(arr1 + arr2)   # [11 22 33]
print(arr1 * arr2)   # [10 40 90]
```

**브로드캐스팅:**

크기가 다른 배열도 특정 규칙에 따라 연산됩니다.

```python
arr = np.array([[1, 2, 3], [4, 5, 6]])
scalar = 10

print(arr + scalar)
# [[11 12 13]
#  [14 15 16]]

# 1차원 배열과 2차원 배열
arr2d = np.array([[1, 2, 3], [4, 5, 6]])
arr1d = np.array([10, 20, 30])

print(arr2d + arr1d)
# [[11 22 33]
#  [14 25 36]]
```

**기본 통계:**

```python
arr = np.array([85, 92, 78, 90, 88])

print(arr.mean())    # 86.6 - 평균
print(arr.sum())     # 433 - 합계
print(arr.std())     # 4.88... - 표준편차
print(arr.min())     # 78 - 최솟값
print(arr.max())     # 92 - 최댓값
```

2차원 배열에서 축(axis) 지정:

```python
arr2d = np.array([[85, 92, 78], [90, 88, 95]])

print(arr2d.mean())         # 88.0 - 전체 평균
print(arr2d.mean(axis=0))   # [87.5 90.  86.5] - 열별 평균
print(arr2d.mean(axis=1))   # [85. 91.] - 행별 평균
```

### 5.3.4 인덱싱과 슬라이싱

**1차원 배열:**

리스트와 동일합니다.

```python
arr = np.array([10, 20, 30, 40, 50])

print(arr[0])      # 10
print(arr[-1])     # 50
print(arr[1:4])    # [20 30 40]
```

**2차원 배열:**

```python
arr2d = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])

print(arr2d[0, 0])    # 1 (첫 행, 첫 열)
print(arr2d[1, 2])    # 6 (둘째 행, 셋째 열)
print(arr2d[0])       # [1 2 3] (첫 행 전체)
print(arr2d[:, 0])    # [1 4 7] (첫 열 전체)
print(arr2d[0:2, 1:3])
# [[2 3]
#  [5 6]]
```

**불린 인덱싱:**

조건으로 필터링할 수 있습니다.

```python
arr = np.array([10, 25, 30, 15, 40])

# 20 이상인 요소만
print(arr[arr >= 20])   # [25 30 40]

# 조건 배열 확인
print(arr >= 20)   # [False  True  True False  True]
```

실전 예제:

```python
scores = np.array([85, 92, 78, 90, 88, 65, 95])

# 80점 이상
passing = scores[scores >= 80]
print(passing)   # [85 92 90 88 95]

# 평균 이상
above_average = scores[scores > scores.mean()]
print(above_average)   # [92 90 95]
```

**팬시 인덱싱:**

인덱스 배열로 선택할 수 있습니다.

```python
arr = np.array([10, 20, 30, 40, 50])

indices = [0, 2, 4]
print(arr[indices])   # [10 30 50]
```

### 5.3.5 배열 변형

**형태 변경:**

```python
arr = np.arange(1, 13)  # [1 2 3 ... 12]

# 3행 4열로 변형
reshaped = arr.reshape(3, 4)
print(reshaped)
# [[ 1  2  3  4]
#  [ 5  6  7  8]
#  [ 9 10 11 12]]

# 4행 3열로
reshaped2 = arr.reshape(4, 3)
print(reshaped2)
```

자동 계산:

```python
arr.reshape(3, -1)  # -1은 자동 계산 (3행, ?열 → 4열)
```

**전치 (행과 열 바꾸기):**

```python
arr2d = np.array([[1, 2, 3], [4, 5, 6]])
print(arr2d)
# [[1 2 3]
#  [4 5 6]]

transposed = arr2d.transpose()
# 또는 arr2d.T
print(transposed)
# [[1 4]
#  [2 5]
#  [3 6]]
```

**1차원으로 펼치기:**

```python
arr2d = np.array([[1, 2, 3], [4, 5, 6]])

flat = arr2d.flatten()
print(flat)   # [1 2 3 4 5 6]
```

---

## 5.4 Pandas 기초

### 5.4.1 Pandas란

Pandas는 데이터 분석을 위한 Python 라이브러리입니다. 엑셀 스프레드시트처럼 테이블 형태의 데이터를 쉽게 다룰 수 있게 해줍니다.

**핵심 데이터 구조:**

- **Series:** 1차원 레이블 배열 (엑셀의 한 열)
- **DataFrame:** 2차원 테이블 (엑셀 시트)

**설치:**

```bash
pip install pandas
```

### 5.4.2 Series

Series는 인덱스가 있는 1차원 배열입니다.

```python
import pandas as pd

# 리스트에서 생성
scores = pd.Series([85, 92, 78, 90, 88])
print(scores)
```

출력:

```
0    85
1    92
2    78
3    90
4    88
dtype: int64
```

**인덱스 지정:**

```python
scores = pd.Series([85, 92, 78, 90, 88], 
                   index=['Alice', 'Bob', 'Charlie', 'Diana', 'Eve'])
print(scores)
```

출력:

```
Alice      85
Bob        92
Charlie    78
Diana      90
Eve        88
dtype: int64
```

**인덱싱:**

```python
print(scores['Alice'])      # 85
print(scores[['Alice', 'Diana']])  # 여러 개
```

**연산:**

```python
print(scores.mean())   # 86.6
print(scores > 85)     # 불린 Series
print(scores[scores > 85])  # 85 초과만
```

### 5.4.3 DataFrame 생성

DataFrame은 여러 Series를 모아놓은 테이블입니다.

**딕셔너리에서:**

```python
import pandas as pd

data = {
    'name': ['Alice', 'Bob', 'Charlie', 'Diana'],
    'age': [20, 21, 19, 22],
    'score': [85, 92, 78, 95]
}

df = pd.DataFrame(data)
print(df)
```

출력:

```
      name  age  score
0    Alice   20     85
1      Bob   21     92
2  Charlie   19     78
3    Diana   22     95
```

**리스트에서:**

```python
data = [
    ['Alice', 20, 85],
    ['Bob', 21, 92],
    ['Charlie', 19, 78]
]

df = pd.DataFrame(data, columns=['name', 'age', 'score'])
print(df)
```

**CSV 파일에서:**

```python
df = pd.read_csv('students.csv')
print(df)
```

CSV 파일이 없다면 먼저 만들어봅시다.

```python
# CSV 파일 생성
data = {
    'name': ['Alice', 'Bob', 'Charlie', 'Diana', 'Eve'],
    'age': [20, 21, 19, 22, 20],
    'score': [85, 92, 78, 95, 88]
}

df = pd.DataFrame(data)
df.to_csv('students.csv', index=False)
```

### 5.4.4 데이터 탐색

**일부 보기:**

```python
print(df.head())     # 처음 5행 (기본값)
print(df.head(3))    # 처음 3행
print(df.tail())     # 마지막 5행
```

**정보 요약:**

```python
print(df.info())
```

출력:

```
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 5 entries, 0 to 4
Data columns (total 3 columns):
 #   Column  Non-Null Count  Dtype 
---  ------  --------------  ----- 
 0   name    5 non-null      object
 1   age     5 non-null      int64 
 2   score   5 non-null      int64 
dtypes: int64(2), object(1)
memory usage: 248.0+ bytes
```

**통계 요약:**

```python
print(df.describe())
```

출력:

```
             age      score
count   5.000000   5.000000
mean   20.400000  87.600000
std     1.140175   6.542171
min    19.000000  78.000000
25%    20.000000  85.000000
50%    20.000000  88.000000
75%    21.000000  92.000000
max    22.000000  95.000000
```

**속성:**

```python
print(df.shape)      # (5, 3) - 5행 3열
print(df.columns)    # Index(['name', 'age', 'score'], dtype='object')
print(df.index)      # RangeIndex(start=0, stop=5, step=1)
```

### 5.4.5 데이터 선택

**열 선택:**

```python
# 한 열 (Series 반환)
print(df['name'])

# 여러 열 (DataFrame 반환)
print(df[['name', 'score']])
```

**행 선택:**

`.loc[]`: 레이블 기반

```python
print(df.loc[0])      # 첫 행 (Series)
print(df.loc[0:2])    # 0부터 2까지 (끝 포함!)
```

`.iloc[]`: 위치 기반

```python
print(df.iloc[0])     # 첫 행
print(df.iloc[0:2])   # 0, 1행 (끝 불포함)
print(df.iloc[-1])    # 마지막 행
```

**특정 셀:**

```python
print(df.loc[0, 'name'])        # 'Alice'
print(df.iloc[1, 2])            # 92
```

**조건 필터링:**

```python
# 나이 20세 이상
adults = df[df['age'] >= 20]
print(adults)

# 점수 85 이상
high_scores = df[df['score'] >= 85]
print(high_scores)

# 여러 조건 (and: &, or: |)
result = df[(df['age'] >= 20) & (df['score'] >= 90)]
print(result)
```

### 5.4.6 데이터 조작

**새 열 추가:**

```python
# 점수에 보너스 5점
df['bonus_score'] = df['score'] + 5
print(df)

# 조건부 새 열
df['grade'] = df['score'].apply(lambda x: 'A' if x >= 90 else 'B' if x >= 80 else 'C')
print(df)
```

**열 삭제:**

```python
df_copy = df.copy()
df_copy = df_copy.drop('bonus_score', axis=1)
print(df_copy)

# 여러 열
df_copy = df.drop(['bonus_score', 'grade'], axis=1)
```

**정렬:**

```python
# 점수로 오름차순
sorted_df = df.sort_values('score')
print(sorted_df)

# 내림차순
sorted_df = df.sort_values('score', ascending=False)
print(sorted_df)

# 여러 열로 정렬
sorted_df = df.sort_values(['age', 'score'], ascending=[True, False])
```

**그룹화:**

```python
# 나이별 평균 점수
grouped = df.groupby('age')['score'].mean()
print(grouped)

# 여러 통계
stats = df.groupby('age')['score'].agg(['mean', 'min', 'max', 'count'])
print(stats)
```

### 5.4.7 결측치 처리

결측치(missing value)는 데이터가 없는 경우를 말합니다. Pandas에서는 `NaN`(Not a Number)으로 표시됩니다.

**결측치 생성 (예제용):**

```python
import numpy as np

data = {
    'name': ['Alice', 'Bob', 'Charlie', 'Diana', 'Eve'],
    'age': [20, np.nan, 19, 22, 20],
    'score': [85, 92, np.nan, 95, 88]
}

df = pd.DataFrame(data)
print(df)
```

출력:

```
      name   age  score
0    Alice  20.0   85.0
1      Bob   NaN   92.0
2  Charlie  19.0    NaN
3    Diana  22.0   95.0
4      Eve  20.0   88.0
```

**결측치 확인:**

```python
print(df.isna())     # 결측치면 True
print(df.notna())    # 결측치 아니면 True

# 열별 결측치 개수
print(df.isna().sum())
```

출력:

```
name     0
age      1
score    1
dtype: int64
```

**결측치 제거:**

```python
# 결측치가 있는 행 전체 삭제
cleaned = df.dropna()
print(cleaned)

# 특정 열 기준
cleaned = df.dropna(subset=['age'])
```

**결측치 채우기:**

```python
# 특정 값으로
filled = df.fillna(0)
print(filled)

# 평균으로 채우기
df['age'] = df['age'].fillna(df['age'].mean())
print(df)

# 앞/뒤 값으로
df_ffill = df.fillna(method='ffill')  # 앞 값으로
df_bfill = df.fillna(method='bfill')  # 뒤 값으로
```

---

## 5.5 유용한 표준 라이브러리

### 5.5.1 math

기본 수학 함수들을 제공합니다.

```python
import math

print(math.sqrt(16))      # 4.0 - 제곱근
print(math.pow(2, 3))     # 8.0 - 거듭제곱
print(math.ceil(3.2))     # 4 - 올림
print(math.floor(3.8))    # 3 - 내림
print(math.pi)            # 3.141592653589793
print(math.e)             # 2.718281828459045
print(math.factorial(5))  # 120 - 팩토리얼
```

### 5.5.2 random

난수 생성을 위한 모듈입니다.

```python
import random

# 0~1 사이 랜덤 실수
print(random.random())

# 범위 내 랜덤 정수
print(random.randint(1, 100))  # 1~100

# 범위 내 랜덤 실수
print(random.uniform(1.0, 10.0))

# 리스트에서 랜덤 선택
fruits = ['apple', 'banana', 'cherry']
print(random.choice(fruits))

# 여러 개 선택
print(random.sample(fruits, 2))

# 리스트 섞기
numbers = [1, 2, 3, 4, 5]
random.shuffle(numbers)
print(numbers)
```

### 5.5.3 datetime

날짜와 시간 처리를 위한 모듈입니다.

```python
from datetime import datetime, timedelta

# 현재 시간
now = datetime.now()
print(now)   # 2026-02-14 15:30:45.123456

# 특정 날짜 생성
birthday = datetime(1990, 5, 15)
print(birthday)

# 날짜 차이
diff = now - birthday
print(diff.days)   # 일수

# 날짜 연산
tomorrow = now + timedelta(days=1)
print(tomorrow)

next_week = now + timedelta(weeks=1)
print(next_week)

# 포맷팅
formatted = now.strftime("%Y년 %m월 %d일 %H:%M:%S")
print(formatted)   # 2026년 02월 14일 15:30:45
```

### 5.5.4 collections

유용한 컨테이너 자료형들을 제공합니다.

**Counter: 빈도 계산**

```python
from collections import Counter

fruits = ['apple', 'banana', 'apple', 'cherry', 'banana', 'apple']

counter = Counter(fruits)
print(counter)   # Counter({'apple': 3, 'banana': 2, 'cherry': 1})

print(counter['apple'])      # 3
print(counter.most_common(2)) # [('apple', 3), ('banana', 2)]
```

**defaultdict: 기본값 딕셔너리**

```python
from collections import defaultdict

# 일반 딕셔너리는 KeyError 발생
normal_dict = {}
# normal_dict['missing'] += 1  # KeyError

# defaultdict는 자동으로 기본값 생성
count_dict = defaultdict(int)  # 기본값 0
count_dict['apple'] += 1
count_dict['banana'] += 1
count_dict['apple'] += 1

print(count_dict)   # defaultdict(<class 'int'>, {'apple': 2, 'banana': 1})
```

---

## 5.6 실습: 실제 데이터 분석

### 5.6.1 요구사항

실제 데이터 분석 시나리오를 시뮬레이션해봅시다.

- 학생 성적 CSV 데이터 생성
- 데이터 불러오기 및 탐색
- 과목별 평균 계산
- 학년별 통계
- 우수 학생 추출
- 결과 저장

### 5.6.2 샘플 데이터 생성

먼저 분석할 데이터를 만듭니다.

```python
import pandas as pd
import numpy as np

# 랜덤 시드 설정 (재현 가능하도록)
np.random.seed(42)

# 데이터 생성
data = {
    'student_id': range(1, 51),
    'name': [f'Student_{i}' for i in range(1, 51)],
    'grade': np.random.choice([1, 2, 3], 50),
    'math': np.random.randint(60, 100, 50),
    'english': np.random.randint(60, 100, 50),
    'science': np.random.randint(60, 100, 50)
}

df = pd.DataFrame(data)

# CSV로 저장
df.to_csv('student_grades.csv', index=False)
print("데이터 생성 완료!")
print(df.head())
```

### 5.6.3 분석 수행

`analyze_grades.py` 파일을 만들고 다음 코드를 작성합니다.

```python
import pandas as pd
import numpy as np

print("=" * 70)
print("학생 성적 데이터 분석")
print("=" * 70)

# 1. 데이터 불러오기
df = pd.read_csv('student_grades.csv')

print("\n1. 데이터 개요:")
print(f"  총 학생 수: {len(df)}")
print(f"  학년 분포: {df['grade'].value_counts().to_dict()}")
print("\n데이터 샘플:")
print(df.head())

# 2. 기본 통계
print("\n2. 전체 과목 통계:")
print(df[['math', 'english', 'science']].describe())

# 3. 총점과 평균 추가
df['total'] = df['math'] + df['english'] + df['science']
df['average'] = df['total'] / 3

print("\n3. 총점 기준 상위 5명:")
top5 = df.nlargest(5, 'total')[['name', 'grade', 'math', 'english', 'science', 'total', 'average']]
print(top5)

# 4. 과목별 평균
print("\n4. 과목별 평균:")
subject_means = {
    '수학': df['math'].mean(),
    '영어': df['english'].mean(),
    '과학': df['science'].mean()
}

for subject, mean in subject_means.items():
    print(f"  {subject}: {mean:.2f}점")

# 5. 학년별 통계
print("\n5. 학년별 평균 점수:")
grade_stats = df.groupby('grade')[['math', 'english', 'science', 'average']].mean()
print(grade_stats)

# 6. 우수 학생 추출 (평균 85 이상)
print("\n6. 우수 학생 (평균 85점 이상):")
excellent = df[df['average'] >= 85][['name', 'grade', 'average']].sort_values('average', ascending=False)
print(f"  총 {len(excellent)}명")
print(excellent)

# 7. 과목별 최고 점수 학생
print("\n7. 과목별 최고 점수 학생:")
for subject in ['math', 'english', 'science']:
    best_student = df.loc[df[subject].idxmax()]
    subject_name = {'math': '수학', 'english': '영어', 'science': '과학'}[subject]
    print(f"  {subject_name}: {best_student['name']} ({best_student[subject]}점)")

# 8. 학년별 합격률 (평균 60점 이상)
print("\n8. 학년별 합격률 (평균 60점 이상):")
for grade in sorted(df['grade'].unique()):
    grade_df = df[df['grade'] == grade]
    passing = len(grade_df[grade_df['average'] >= 60])
    total = len(grade_df)
    rate = passing / total * 100
    print(f"  {grade}학년: {passing}/{total} ({rate:.1f}%)")

# 9. 과목 간 상관관계
print("\n9. 과목 간 상관관계:")
correlation = df[['math', 'english', 'science']].corr()
print(correlation)

# 10. 결과 저장
print("\n10. 결과 저장:")

# 우수 학생 목록 저장
excellent.to_csv('excellent_students.csv', index=False)
print("  - excellent_students.csv 저장 완료")

# 학년별 통계 저장
grade_stats.to_csv('grade_statistics.csv')
print("  - grade_statistics.csv 저장 완료")

# 전체 데이터 (평균 포함) 저장
df.to_csv('student_grades_analyzed.csv', index=False)
print("  - student_grades_analyzed.csv 저장 완료")

print("\n" + "=" * 70)
print("분석 완료!")
print("=" * 70)
```

실행 결과 예시:

생성한 데이터가 랜덤으로 만들어지기 때문에 아래 결과와 다를 수 있습니다.

```
======================================================================
학생 성적 데이터 분석
======================================================================

1. 데이터 개요:
  총 학생 수: 50
  학년 분포: {2: 19, 1: 17, 3: 14}

데이터 샘플:
   student_id       name  grade  math  english  science
0           1  Student_1      2    91       95       75
1           2  Student_2      2    71       76       88
2           3  Student_3      3    60       79       82
3           4  Student_4      1    88       63       87
4           5  Student_5      2    66       92       75

2. 전체 과목 통계:
             math    english    science
count   50.000000  50.000000  50.000000
mean    79.680000  79.840000  78.900000
std     11.065942  10.873142  10.536789
min     60.000000  60.000000  61.000000
25%     70.750000  70.750000  70.000000
50%     80.000000  79.500000  78.500000
75%     88.000000  88.250000  87.250000
max     99.000000  99.000000  99.000000

3. 총점 기준 상위 5명:
         name  grade  math  english  science  total    average
16  Student_17      1    96       94       96    286  95.333333
7    Student_8      3    94       93       95    282  94.000000
...

분석 완료!
======================================================================
```

### 5.6.4 결과 저장

위 코드는 이미 결과를 CSV로 저장했습니다. Excel로도 저장할 수 있습니다.

```python
# Excel로 저장 (openpyxl 필요)
# pip install openpyxl

df.to_excel('student_grades.xlsx', index=False, sheet_name='성적')
```

**AI 활용 팁:**

더 깊은 분석을 하고 싶다면 AI에게 물어보세요.

"이 학생 성적 데이터로 어떤 추가 분석을 할 수 있을까요?"

AI가 제안할 수 있는 분석들:

- 과목별 표준편차로 난이도 비교
- 학년별 과목 선호도 분석
- 총점 분포 히스토그램
- 이상치(outlier) 탐지
- 학생별 강점/약점 과목 파악

---

**이 장에서 배운 것:**

- **라이브러리 개념:** 모듈, 패키지, 라이브러리의 차이
- **import 문:** 기본 import, 별칭, 선택적 import, 오류 해결
- **NumPy:** 배열 생성, 연산, 인덱싱, 통계 함수
- **Pandas:** Series, DataFrame, 데이터 탐색, 선택, 조작, 결측치 처리
- **표준 라이브러리:** math, random, datetime, collections
- **실습:** CSV 데이터 분석, 통계 계산, 결과 저장

**다음 장에서는:**

파일 입출력을 자세히 다룹니다. CSV 외에도 텍스트 파일, JSON, Excel 등 다양한 형식의 파일을 읽고 쓰는 방법을 배우며, 데이터를 영구적으로 저장하고 불러오는 완전한 워크플로우를 완성합니다.